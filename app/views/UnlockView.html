{#if $profile}
    <UserProfile />
{:else}
    <RequestAuthentication />
{/if}

<section class="welcome">
{@html welcome}
</section>

<style>
.welcome {
    margin: 0.5em 1em 0 1em;
    padding: 1em;
    border: 1px solid #333333;
    color: #333333;
}
</style>

<script type="text/javascript">
import {getHistory} from '../../vendor/svelte-routing'

export default {
    components: {
        UserProfile: '../components/UserProfile.html',
        RequestAuthentication: '../components/RequestAuthentication.html'
    },

    data() {
        return {
            welcome: process.env.WELCOME_MD
        }
    },

    oncreate() {
        // If box has already been unlocked, just go straight to the list
        const {box} = this.store.get()
        if (box && box.isUnlocked()) {
            // Do this in the next tick
            setTimeout(() => {
                getHistory().replace('/list')
            }, 0)
        }
	}
}
</script>
