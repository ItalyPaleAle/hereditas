{#await $box.fetchIndex()}
    <p>Fetching index, please waitâ€¦</p>
{:then response}
    <form on:submit="handleSubmit(event)">
        <div class="form-group row">
            <label for="inputPassphrase" class="col-sm-4 col-form-label">Unlock passphrase:</label>
            <div class="col-sm-8">
                <input type="password" class="form-control" id="inputPassphrase" bind:value="passphrase" />
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-8">
                <button type="submit" class="btn btn-primary">Browse this Hereditas</button>
            </div>
        </div>
    </form>
{:catch error}
    <p>Error while fetching the index: {error}</p>
{/await}

<script type="text/javascript">

export default {
    data() {
        return {
            passphrase: ''
        }
    },

    methods: {
		handleSubmit(event) {
			// Prevent the page from reloading
            event.preventDefault()

            const {passphrase} = this.get()
            const {box, hereditasProfile} = this.store.get()
            console.log(box, hereditasProfile)
            box.unlock(passphrase, hereditasProfile.token)
		}
	}
}
</script>
